syntax = "proto3";

package zaicontracts.sleep;
import "Protos/sleep_service_messages.proto";

// Sleep Analysis Service
service SleepService {
  // Analyze sleep data with streaming response
  rpc AnalyzeSleep (SleepDataRequest) returns (stream SleepChatResponse);

  // Chat with sleep assistant with streaming response
  rpc Chat (SleepChatRequest) returns (stream SleepChatResponse);

  rpc GetSleepScore(GetSleepScoreRequest) returns (GetSleepScoreResponse);
  rpc WeeklyInsights(WeeklyInsightsRequest) returns (WeeklyInsightsResponse);

  // Home / Today screen
  rpc GetToday (GetTodayRequest)
      returns (GetTodayResponse);

  // Premium issue detail
  rpc GetIssueDetail (GetIssueDetailRequest)
      returns (GetIssueDetailResponse);

  // Improve tab (single focus action)
  rpc GetImprove (GetImproveRequest)
      returns (GetImproveResponse);

  // Trends & history
  rpc GetInsights (GetInsightsRequest)
      returns (GetInsightsResponse);

  // Save sleep day data from HealthKit/UserInput
  rpc SaveSleepDay (SaveSleepDayRequest)
      returns (SaveSleepDayResponse);

  // Save user baseline
  rpc SaveBaseline (SaveBaselineRequest)
      returns (SaveBaselineResponse);

  // Save user sleep context (stress, caffeine, etc.)
  rpc SaveSleepContext (SubmitSleepContextRequest)
      returns (SubmitSleepContextResponse);
}
